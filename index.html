<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Phasmophobia Broads HQ</title>

  <!-- ðŸ”® GLOBAL STYLES -->
  <link rel="stylesheet" href="styles/animations.css" />
  <link rel="stylesheet" href="styles/hunt.css" />
  <link rel="stylesheet" href="styles/style.css" /> <!-- Your main UI styles -->

  <!-- ðŸŸ£ Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>

<body>

<header>
  <h1>PHASMOPHOBIA BROADS HQ</h1>
  <p>Private ghost-hunting hub for your squad.</p>
</header>

<!-- ===================== NAVIGATION ====================== -->
<nav>
  <button class="tab-btn active" data-target="panel-chat">Chat</button>
  <button class="tab-btn" data-target="panel-evidence">Evidence</button>
  <button class="tab-btn" data-target="panel-status">Player Status</button>
  <button class="tab-btn" data-target="panel-locations">Locations</button>
  <button class="tab-btn" data-target="panel-ghostlog">Ghost Log</button>
  <button class="tab-btn" data-target="panel-casefiles">Case Files</button>
  <button class="tab-btn" data-target="panel-lobby">Lobby / Voice</button>
</nav>

<main>

  <!-- ===================== CHAT ====================== -->
  <section id="panel-chat" class="panel active">
    <h2>Van Radio Chat</h2>

    <div id="chat-log"></div>

    <form id="chat-form">
      <input id="chat-input" type="text" autocomplete="off"
             placeholder="Type a message or command: !hunt !flicker !manifest etc." />
      <button type="submit">Send</button>
    </form>
  </section>

  <!-- ===================== EVIDENCE ====================== -->
  <section id="panel-evidence" class="panel">
    <h2>Evidence Tracker</h2>
    <p>Example: <code>!evidence: EMF 5</code></p>
    <div id="evidence-list"></div>
  </section>

  <!-- ===================== STATUS ====================== -->
  <section id="panel-status" class="panel">
    <h2>Player Status</h2>
    <p>Use: <code>!dead: NAME</code> or <code>!revive: NAME</code></p>
    <div id="status-list"></div>
  </section>

  <!-- ===================== LOCATIONS ====================== -->
  <section id="panel-locations" class="panel">
    <h2>Player Locations</h2>
    <p>Example: <code>!location: Starla â†’ Basement</code></p>
    <div id="location-list"></div>
  </section>

  <!-- ===================== GHOST LOG ====================== -->
  <section id="panel-ghostlog" class="panel">
    <h2>Ghost Activity Log</h2>
    <div id="ghost-log"></div>
  </section>

  <!-- ===================== CASE FILES ====================== -->
  <section id="panel-casefiles" class="panel">
    <h2>Case Files</h2>

    <div class="case-grid">

      <div class="case-card" onclick="openPoster(1)">
        <img src="assets/posters/poster1.png" />
        <div>Summoning Circle</div>
      </div>

      <div class="case-card" onclick="openPoster(2)">
        <img src="assets/posters/poster2.png" />
        <div>Dragged From the Van</div>
      </div>

      <div class="case-card" onclick="openPoster(3)">
        <img src="assets/posters/poster3.png" />
        <div>Voodoo Doll Tackle</div>
      </div>

      <div class="case-card" onclick="openPoster(4)">
        <img src="assets/posters/poster4.png" />
        <div>Ouija Board Chaos</div>
      </div>

      <div class="case-card" onclick="openPoster(5)">
        <img src="assets/posters/poster5.png" />
        <div>Running From Ghost</div>
      </div>

      <div class="case-card" onclick="openPoster(6)">
        <img src="assets/posters/poster6.png" />
        <div>Ghost Writing</div>
      </div>

    </div>

    <!-- MODAL -->
    <div id="poster-modal" class="poster-modal" onclick="closePoster()">
      <span class="poster-close">&times;</span>
      <img id="poster-modal-img" />
      <p id="poster-caption"></p>
    </div>

  </section>

  <!-- ===================== LOBBY / VOICE ====================== -->
  <section id="panel-lobby" class="panel">
    <h2>Lobby / Voice Chat</h2>
    <button onclick="openJitsi()">Open Voice Channel</button>
  </section>

</main>

<footer>
  <p>Â© <span id="year"></span> Phasmophobia Broads HQ</p>
</footer>

<!-- ====================================================
     FIREBASE + APP LOGIC
======================================================== -->

<script type="module">
  import { app, db } from "./scripts/firebase.js";
  import { initMain } from "./scripts/main.js";

  window.__DB = db;

  initMain();
</script>

<!-- NON-MODULE SCRIPTS -->
<script src="scripts/commands.js"></script>
<script src="scripts/hunt.js"></script>

<script>
  // Poster modal logic
  function openPoster(num) {
    const modal = document.getElementById("poster-modal");
    const img = document.getElementById("poster-modal-img");
    const caption = document.getElementById("poster-caption");

    img.src = `assets/posters/poster${num}.png`;
    caption.textContent = "";
    modal.style.display = "block";
  }

  function closePoster() {
    document.getElementById("poster-modal").style.display = "none";
  }

  // Jitsi
  function openJitsi() {
    window.open("https://meet.jit.si/PhasmophobiaBroadsHQ", "_blank");
  }

  document.getElementById("year").textContent = new Date().getFullYear();
</script>

</body>
</html>
