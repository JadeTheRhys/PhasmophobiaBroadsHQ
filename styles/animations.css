/* ============================================================
   animations.css ‚Äî Version B (FIXED)
   Ghost Event Visual Effects for hunt.js + commands.js
   ============================================================ */


/* ------------------------------------------------------------
   GLOBAL EFFECT OVERLAY (all screen-based animations use this)
------------------------------------------------------------ */
.effect-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9998;
}

/* ============================================================
   üî• HUNT EFFECT ‚Äî Red pulse + shaking screen
============================================================ */
/* This is primarily intended to be applied to a full-screen overlay or the body */
.hunt-active {
    animation: huntPulse 0.8s infinite alternate ease-in-out,
               screenShake 0.6s infinite ease-in-out;
}

@keyframes huntPulse {
    0%   { background: rgba(120, 0, 0, 0.2); }
    100% { background: rgba(255, 0, 0, 0.35); }
}

@keyframes screenShake {
    0%   { transform: translate(0,0); }
    20%  { transform: translate(-8px, 4px); }
    40%  { transform: translate(5px, -5px); }
    60%  { transform: translate(-6px, 3px); }
    80%  { transform: translate(4px, -3px); }
    100% { transform: translate(0,0); }
}

/* ============================================================
   üí° FLICKER EFFECTS (Used by flicker() in uiEffects.js)
   ============================================================ */

/* Base Flicker */
.lights-flicker {
    animation: flickerFlash 0.15s infinite;
}

@keyframes flickerFlash {
    0%   { opacity: 0.3; }
    50%  { opacity: 1; }
    100% { opacity: 0.3; }
}

/* Red Flicker (Used by flicker('red')) */
.lights-flicker-red {
    animation: flickerFlash 0.1s infinite,
               redTint 0.5s forwards;
}
@keyframes redTint {
    from { filter: saturate(1.5) hue-rotate(0deg); }
    to   { filter: saturate(2) hue-rotate(-20deg); }
}

/* Pulse Flicker (Used by flicker('pulse')) */
.lights-flicker-pulse {
    animation: flickerFlash 0.3s infinite alternate,
               pulseGlow 0.6s infinite alternate;
}
@keyframes pulseGlow {
    from { box-shadow: 0 0 10px rgba(155, 91, 255, 0.5); }
    to   { box-shadow: 0 0 20px rgba(155, 91, 255, 1); }
}


/* ============================================================
   üëª SCREEN SHAKE (Used by shake() in uiEffects.js)
   ============================================================ */
.screen-shake {
    /* Uses the existing screenShake keyframes */
    animation: screenShake 0.35s ease-out;
}


/* ============================================================
   ‚úè GHOST WRITING POPUP (Used by ghostWrite() in ghostEvents.js)
   ============================================================ */
.ghost-writing-popup {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 1;
    transition: opacity 2s ease-out;
}

.ghost-writing-popup.fade {
    opacity: 0;
}

.ghost-writing-text {
    /* This style assumes the text is huge and creepy */
    font-family: 'Courier New', monospace;
    font-size: 8vw; 
    color: red;
    text-shadow: 0 0 20px red;
    animation: writingAppear 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes writingAppear {
    0% { transform: scale(0.5); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}


/* ============================================================
   üëª MANIFEST ‚Äî brightness pulse (ghost showing)
============================================================ */
.ghost-manifest {
    animation: manifestFade 3s ease-out;
}

@keyframes manifestFade {
    0%   { filter: brightness(0.6); }
    50%  { filter: brightness(1.2) contrast(1.4); }
    100% { filter: brightness(1); }
}


/* ============================================================
   üö™ DOOR SLAM ‚Äî white flash + short shake
============================================================ */
.door-slam {
    animation: slamFlash 0.35s ease-out,
               slamShake 0.5s ease-out;
}

@keyframes slamFlash {
    0%   { background: rgba(255,255,255,0.8); }
    100% { background: rgba(255,255,255,0); }
}

@keyframes slamShake {
    0%   { transform: translate(0,0); }
    25%  { transform: translate(-8px, 3px); }
    50%  { transform: translate(5px, -4px); }
    75%  { transform: translate(-6px, 2px); }
    100% { transform: translate(0,0); }
}


/* ============================================================
   üîÆ CURSE ‚Äî purple hue distortion + blur pulse
============================================================ */
.curse-effect {
    animation: cursePulse 3s ease-in-out;
}

@keyframes cursePulse {
    0%   { filter: blur(0px) brightness(0.9); }
    40%  { filter: blur(3px) brightness(1.4) hue-rotate(250deg); }
    100% { filter: blur(0px) brightness(1); }
}


/* ============================================================
   üé≤ RANDOM EVENT ‚Äî rapid jitter
============================================================ */
.ghost-event {
    animation: randomFlash 0.2s alternate 8;
}

@keyframes randomFlash {
    0%   { opacity: 0.2; }
    100% { opacity: 1; }
}
